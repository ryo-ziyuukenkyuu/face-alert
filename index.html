<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Face Alert</title>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<link rel="stylesheet" href="style.css">
</head>
<body>

<h2>Face Alert 5.1.9</h2>

<video id="video" autoplay muted playsinline></video>

<!-- ボタン横並び -->
<div id="buttonContainer">
  <button id="toggleBtn" class="start">▶ 開始</button>
  <button id="calibBtn">キャリブ</button>
  <button id="switchCamBtn">📷 カメラ切替</button>
  <div id="statusText">🔴 停止中</div>
</div>

<div class="alert-panel">
  <div id="alertReason" class="safe">異常なし</div>
</div>

<hr>

<div id="currentValues">
  <div>Yaw：<span id="yawValue">0</span>°</div>
  <div>Pitch：<span id="pitchValue">0</span>°</div>
  <div>鼻‐顎距離比：<span id="noseValue">1.00</span></div>
  <div>顔面積比：<span id="areaValue">1.00</span></div>
  <div>目の可視率：<span id="eyeValue">1.00</span></div>
</div>

<hr>

<div id="settingsValues">
  <label>Yaw許容角度
    <input type="range" id="yawSlider" min="30" max="120" step="5" value="80">
    <span id="yawLimit">80</span>°
  </label>

  <label>Pitch許容角度
    <input type="range" id="pitchSlider" min="5" max="60" step="5" value="25">
    <span id="pitchLimit">25</span>
  </label>

  <hr>

  <label>姿勢異常 継続時間（推奨0〜1秒）
    <input type="range" id="timeSlider" min="0" max="1" step="0.1" value="0.8">
    <span id="timeLimit">0.8</span> 秒
  </label>

  <label>顔未検出 継続時間（推奨2〜5秒）
    <input type="range" id="faceMissingSlider" min="1" max="5" step="0.5" value="3">
    <span id="faceMissingLimit">3.0</span> 秒
  </label>

  <hr>

  <label>鼻‐顎距離比
    <input type="range" id="noseSlider" min="0.3" max="0.9" step="0.05" value="0.55">
    <span id="noseLimit">0.55</span>
  </label>

  <label>顔面積比
    <input type="range" id="areaSlider" min="0.3" max="0.9" step="0.05" value="0.6">
    <span id="areaLimit">0.60</span>
  </label>

  <label>目の可視率
    <input type="range" id="eyeSlider" min="0.2" max="0.9" step="0.05" value="0.4">
    <span id="eyeLimit">0.40</span>
  </label>
</div>

<!-- アラーム音 -->
<audio id="softAlarm">
  <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg">
</audio>

<audio id="hardAlarm">
  <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg">
</audio>

<script src="script.js"></script>
</body>
</html>
